<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Aluno - Nago Capoeira</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Painel do Aluno</h1>
        <nav>
            <ul>
                <li><a href="#perfil">Meu Perfil</a></li>
                <li><a href="#pagamentos">Pagamentos</a></li>
                <li><a href="#treinos">Treinos</a></li>
                <li><a href="#logout" id="logout">Sair</a></li>
            </ul>
        </nav>
    </header>

    <section id="perfil">
        <h2>Meu Perfil</h2>
        <p><strong>Nome:</strong> <span id="user-nome"></span></p>
        <p><strong>Email:</strong> <span id="user-email"></span></p>
    </section>
    
    <section id="pagamentos">
        <h2>Histórico de Pagamentos</h2>
        <ul id="pagamentos-list"></ul>
    </section>

    <section id="treinos">
        <h2>Próximos Treinos</h2>
        <ul id="treinos-list"></ul>
    </section>
    
    <footer>
        <p>&copy; 2025 Nago Capoeira Campina Grande - Todos os direitos reservados.</p>
    </footer>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    
        const firebaseConfig = {
            apiKey: "SUA-API-KEY",
            authDomain: "nagocapoeira-6cae5.firebaseapp.com",
            projectId: "nagocapoeira-6cae5",
            storageBucket: "nagocapoeira-6cae5.appspot.com",
            messagingSenderId: "14626642245",
            appId: "AIzaSyDEwWz8aFhwYQzQmBmQR5YFUBd7vg5mJSk"
        };
    
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
    
        // Monitorar login do usuário
        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                window.location.href = "index.html";
                return;
            }
            
            document.getElementById("user-email").innerText = user.email;
            const q = query(collection(db, "usuarios"), where("email", "==", user.email));
            const querySnapshot = await getDocs(q);
            if (!querySnapshot.empty) {
                const userData = querySnapshot.docs[0].data();
                document.getElementById("user-nome").innerText = userData.nome;
            }
        });
    
        // Logout
        document.getElementById("logout").addEventListener("click", async () => {
            await signOut(auth);
            window.location.href = "index.html";
        });
    
    </script>
</body>
</html>
